 <!DOCTYPE html>
<html>
    <head>
        <title>Falloutdle</title>
        <script>
            const hostUrl="https://falloutdle.net"
            const todayUrl=hostUrl+"/api/characters/today"
            const randomUrl="https://falloutdle.net"
            let nbGuess = 5

            async function fetchURL(url){
                const response = await fetch(url);
                return await response.json();
            }

            async function today(){
                const url = host+'/api/characters/today';
                const response = await fetchURL(url);
                console.log(response);
                return response.data
            }

            async function random(){

                const url = host+'/api/characters/random';
                const response = await fetchURL(url);
                console.log(response);
                const char = response.data

                const button = document.getElementById("fname");
                const pNode = document.getElementById("resultRandom");

                pNode.textContent = "Random character: "+char.name;
            }

            async function guess(){

                var name = document.getElementById('character_name').value;
                if (name === ""){
                    text="Empty field ! Nb guess left: " +nbGuess;

                    const pNode = document.getElementById("result");
                    pNode.textContent = text;
                    return
                }

                nbGuess--
                if (nbGuess <= 0){
                    let char = await today() 
                    text="Wrong ! Today's character was "+ char.name;

                    const pNode = document.getElementById("result");
                    pNode.textContent = text;
                    return
                }

                const url = host+"/api/guess";

                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        character_name: name
                    })
                });

                const json = await response.json();
                const isCorrect = json.data.isGuessed

                if (isCorrect === true) {
                    text="Success ! Today's character was "+ char.name;
                }
                else {
                    text="Wrong ! Nb guess left: " +nbGuess;
                }

                const pNode = document.getElementById("result");
                pNode.textContent = text;
            }
        </script>
    </head>

    <body style="background-color:blanchedalmond; ">

        <div style="align-items: center;display: flex;justify-content: center;flex-direction: column;">
            <h1><u>Falloutdle</u></h1>

            <h3>Guess today Character</h3>
            <input id="character_name" name="character_name" placeholder="Roger Maxson" required>
            <button onclick="guess()">Guess</button>
            <p id="result">Nb guess left: 5</p>

            <h3>Random Character</h3>
            <input type="button" id="fname" name="fname" value="Click" onclick="random()">
            <p id="resultRandom"></p>        
        </div>       

    </body>

    <footer>
        @2025 Work in progress - Code Source <a href="https://github.com/Doruo/falloutdle">avaible here</a>.
    </footer>
</html> 